{"ast":null,"code":"var _jsxFileName = \"C:\\\\devv\\\\pet_project\\\\pet_front\\\\src\\\\components\\\\Layout\\\\order\\\\Review.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport GoodsApi from '../../../api/GoodsApi';\nimport PageNumber from '../../util/PageNumber';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReviewComp = styled.div`\n  .container {\n    width: 100%;\n    .reviews {\n      width: 100%;\n      height: 400px;\n      border: 1px solid #ddd;\n      .review {\n        .prodimg {\n          width: 100px;\n          height: 100px;\n          border: 1px solid #ddd;\n        }\n      }\n    }\n  }\n`;\n\n// 리뷰 페이지\n_c = ReviewComp;\nexport default function Review({\n  stars,\n  goodsId,\n  reviewNum,\n  imgUrl\n}) {\n  _s();\n  useEffect(() => {\n    console.log('props로 전달된 goodsId:', goodsId);\n  }, [goodsId]);\n  const [reviews, setReviews] = useState([]); // 유저 리뷰\n  const [userStar, setUserStar] = useState(); // ⭐ 유저 별점\n\n  const [sort, setSort] = useState('desc');\n  const [page, setPage] = useState(0); // 1 페이지, 2 페이지, ...\n\n  //const searchType = params.get(\"searchType\") || \"title\";\n  //const searchKeyword = params.get(\"searchKeyword\") || \"\";\n  const [type, setType] = useState('all');\n  const [keyword, setKeyword] = useState('');\n\n  // 페이징 정보 상태변수 (현재 페이징 상태 핸들링 위함)\n  const [paging, setPaging] = useState({\n    start: 0,\n    end: 4,\n    isPrev: false,\n    isNext: true,\n    totalElement: 0,\n    totalPages: 0\n  });\n\n  // (페이징) : 해당 상품을 구매한 모든 유저 - ReviewResponseDTO\n  const getPageList = async goodsId => {\n    if (!goodsId) {\n      console.error('goodsId가 유효하지 않습니다.');\n      return;\n    }\n    const pages = {\n      page: page,\n      size: 10,\n      sortBy: sort,\n      keyword: keyword,\n      type: type\n    };\n    try {\n      const result = await GoodsApi.getReviewsPageList(pages, goodsId);\n      // 1. 리뷰 목록\n      setReviews(result.content);\n\n      // 2. 페이지번호 정보\n      let temp = Math.floor(page / 5) * 5;\n      setPaging({\n        start: temp,\n        end: Math.min(temp + 5, result.totalPages),\n        isPrev: result.prev,\n        isNext: result.next,\n        totalElement: result.totalElements,\n        totalPages: result.totalPages\n      });\n    } catch (err) {\n      console.error('getReviewsPageList 실패: ', err);\n    }\n  };\n\n  // 유저가 매긴 별점점\n  const getStars = rating => {\n    return '⭐'.repeat(Math.floor(rating)); // 반올림이나 소수점 무시\n  };\n  useEffect(() => {\n    getPageList(goodsId);\n  }, [page]);\n  return /*#__PURE__*/_jsxDEV(ReviewComp, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uC0C1\\uD488\\uD3C9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uB3D9\\uC77C\\uD55C \\uC0C1\\uD488\\uC5D0 \\uB300\\uD55C \\uC0C1\\uD488\\uD3C9\\uC73C\\uB85C, \\uD310\\uB9E4\\uC790\\uB294 \\uB2E4\\uB97C \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rating\",\n        style: {\n          color: 'red',\n          fontSize: '24px'\n        },\n        children: [stars, \"\\xA0\\xA0\", '( ' + reviewNum + ' )']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reviews\",\n        children: reviews.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: getStars(item.score)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `${imgUrl}${item.imageFile}`,\n            alt: item.goodsName,\n            className: \"prodimg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: item.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n_s(Review, \"ePPScUZ3c5ZwlNtD1XvcG7AEDXk=\");\n_c2 = Review;\nvar _c, _c2;\n$RefreshReg$(_c, \"ReviewComp\");\n$RefreshReg$(_c2, \"Review\");","map":{"version":3,"names":["React","useEffect","useState","styled","GoodsApi","PageNumber","jsxDEV","_jsxDEV","ReviewComp","div","_c","Review","stars","goodsId","reviewNum","imgUrl","_s","console","log","reviews","setReviews","userStar","setUserStar","sort","setSort","page","setPage","type","setType","keyword","setKeyword","paging","setPaging","start","end","isPrev","isNext","totalElement","totalPages","getPageList","error","pages","size","sortBy","result","getReviewsPageList","content","temp","Math","floor","min","prev","next","totalElements","err","getStars","rating","repeat","children","className","fileName","_jsxFileName","lineNumber","columnNumber","style","color","fontSize","map","item","index","score","src","imageFile","alt","goodsName","title","_c2","$RefreshReg$"],"sources":["C:/devv/pet_project/pet_front/src/components/Layout/order/Review.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport GoodsApi from '../../../api/GoodsApi';\r\nimport PageNumber from '../../util/PageNumber';\r\n\r\nconst ReviewComp = styled.div`\r\n  .container {\r\n    width: 100%;\r\n    .reviews {\r\n      width: 100%;\r\n      height: 400px;\r\n      border: 1px solid #ddd;\r\n      .review {\r\n        .prodimg {\r\n          width: 100px;\r\n          height: 100px;\r\n          border: 1px solid #ddd;\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n// 리뷰 페이지\r\nexport default function Review({ stars, goodsId, reviewNum, imgUrl }) {\r\n  useEffect(() => {\r\n    console.log('props로 전달된 goodsId:', goodsId);\r\n  }, [goodsId]);\r\n\r\n  const [reviews, setReviews] = useState([]); // 유저 리뷰\r\n  const [userStar, setUserStar] = useState(); // ⭐ 유저 별점\r\n\r\n  const [sort, setSort] = useState('desc');\r\n  const [page, setPage] = useState(0); // 1 페이지, 2 페이지, ...\r\n\r\n  //const searchType = params.get(\"searchType\") || \"title\";\r\n  //const searchKeyword = params.get(\"searchKeyword\") || \"\";\r\n  const [type, setType] = useState('all');\r\n  const [keyword, setKeyword] = useState('');\r\n\r\n  // 페이징 정보 상태변수 (현재 페이징 상태 핸들링 위함)\r\n  const [paging, setPaging] = useState({\r\n    start: 0,\r\n    end: 4,\r\n    isPrev: false,\r\n    isNext: true,\r\n    totalElement: 0,\r\n    totalPages: 0,\r\n  });\r\n\r\n  // (페이징) : 해당 상품을 구매한 모든 유저 - ReviewResponseDTO\r\n  const getPageList = async (goodsId) => {\r\n    if (!goodsId) {\r\n      console.error('goodsId가 유효하지 않습니다.');\r\n      return;\r\n    }\r\n    const pages = {\r\n      page: page,\r\n      size: 10,\r\n      sortBy: sort,\r\n      keyword: keyword,\r\n      type: type,\r\n    };\r\n    try {\r\n      const result = await GoodsApi.getReviewsPageList(pages, goodsId);\r\n      // 1. 리뷰 목록\r\n      setReviews(result.content);\r\n\r\n      // 2. 페이지번호 정보\r\n      let temp = Math.floor(page / 5) * 5;\r\n      setPaging({\r\n        start: temp,\r\n        end: Math.min(temp + 5, result.totalPages),\r\n        isPrev: result.prev,\r\n        isNext: result.next,\r\n        totalElement: result.totalElements,\r\n        totalPages: result.totalPages,\r\n      });\r\n    } catch (err) {\r\n      console.error('getReviewsPageList 실패: ', err);\r\n    }\r\n  };\r\n\r\n  // 유저가 매긴 별점점\r\n  const getStars = (rating) => {\r\n    return '⭐'.repeat(Math.floor(rating)); // 반올림이나 소수점 무시\r\n  };\r\n\r\n  useEffect(() => {\r\n    getPageList(goodsId);\r\n  }, [page]);\r\n\r\n  return (\r\n    <ReviewComp>\r\n      <div className='container'>\r\n        <div>상품평</div>\r\n        <div>동일한 상품에 대한 상품평으로, 판매자는 다를 수 있습니다.</div>\r\n        <div className='rating' style={{ color: 'red', fontSize: '24px' }}>\r\n          {stars}&nbsp;&nbsp;{'( ' + reviewNum + ' )'}\r\n        </div>\r\n        <br />\r\n        <hr />\r\n        <div className='reviews'>\r\n          {reviews.map((item, index) => (\r\n            <div className='review' key={index}>\r\n              <div>{getStars(item.score)}</div>\r\n              <img src={`${imgUrl}${item.imageFile}`} alt={item.goodsName} className='prodimg' />\r\n\r\n              <div>{item.title}</div>\r\n              <div>{item.content}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {/* <PageNumber page={page} setPage={setPage} paging={paging} /> */}\r\n      </div>\r\n    </ReviewComp>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}